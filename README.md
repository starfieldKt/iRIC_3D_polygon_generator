# iRIC_3D_polygon_generator

iRICの計算結果（標高と水位を想定）から3Dポリゴンを作るソルバーです。
現在はstl形式とobj形式で出力することができます。

# インストール方法

`install`フォルダごと、`iRIC_v4\private\solvers`において好きなフォルダ名に変更してください。


# 使い方

1. 入力用CGNSファイルの選択
iRICを起動してソルバーに3D_polygon_generatorを選択すると、入力用CGNSファイルの選択画面が現れるのでダイアログから3Dポリコンにしたい計算結果の入っているCGNSファイルを選択してください。
このとき、格子をインポートするか聞かれるので「はい」を選択します。エラーが出ますが無視して「はい」を押します。

2. 計算条件入力

計算条件を入力します。

![image](https://user-images.githubusercontent.com/106499621/231960927-531136e5-6dda-47f3-8ccb-a5149fb8b634.png)



| 項目名  | 説明 |
| ------------- | ------------- |
| CGNSファイル名 | 先ほど選択したCGNSファイルのパスです。  |
| 保存場所 | 3Dポリゴンを保存するフォルダを選択してください。  |
| 保存するファイル名 | 3Dポリゴン出力時のファイル名を入力してくだい。  |
| stlを出力する | stlを出力する場合チェックをいれてください。  |
| 南北を反転させる(stl) | チェックを入れるとY軸方向の座標の正負を反転させます。iRICは右手座標系なので左手座標系にしたい場合はチェックを入れてください。  |
| objを出力する | stlを出力する場合チェックをいれてください。  |
| 南北を反転させる(obj) | チェックを入れるとY軸方向の座標の正負を反転させます。iRICは右手座標系なので左手座標系にしたい場合はチェックを入れてください。  |
| z方向の倍率 | 出力データのz方向の値をn倍します。広い範囲のポリゴンを作成すると水平方向のスケールに対して垂直方向のスケールが小さいので気になる人はつかってください。  |
| 出力開始時間 |ポリゴンの出力を開始する時間を入力してください（秒）。出力開始時間から終了時間までの間に存在する計算結果すべてのポリゴンを作成します。|
| 出力終了時間 |ポリゴンの出力を終了する時間を入力してください（秒）。出力開始時間から終了時間までの間に存在する計算結果すべてのポリゴンを作成します。|
| 河床の標高の名前|入力用CGNSファイルで使用されている河床のデータ名を選択してください。|
| 水面の出力をする| チェックを入れると水面の3Dポリゴンも別ファイルで作成されます。 |
| 水面の標高の名前| 水面を出力する場合選択します。入力用CGNSファイルで使用されている水位のデータ名を選択してください。|

3. 計算の実行

計算を実行すると指定したフォルダにファイルが出力されます。
ファイル名は河床形状は`入力したファイル名_time=〇〇〇_botttom`、水面は`入力したファイル名_time=〇〇〇_ws`で出力されます。
